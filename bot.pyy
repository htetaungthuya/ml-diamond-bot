from telegram import Update, ReplyKeyboardMarkup
from telegram.ext import Updater, CommandHandler, MessageHandler, Filters, CallbackContext

TOKEN = "7635809617:AAFd3pjOZo3pkoSpMIZwU2_OURgOsQlhQy"
ADMIN_ID = 7533465237 # your telegram id

def start(update: Update, context: CallbackContext):
    keyboard = [["ğŸ’ Price List"], ["ğŸ“ Order"]]
    update.message.reply_te        "ML Diamond Shop á€™á€¾ á€€á€¼á€­á€¯á€†á€­á€¯á€•á€«á€á€šá€º ğŸ™",
        reply_markup=ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    )

def price(update, context):
    update.message.reply_text(
        "ğŸ“¢ Today Update Price ğŸ“¢\n\n"
        "ğŸ’ Weekly Pass\n"
        "ğŸŒŒğŸŒŒğŸŒŒğŸŒŒğŸŒŒğŸŒŒ\n\n"
        "â­ï¸ TG Premium 1 Month â€“ 20,000 Ks\n\n"
        "ğŸ Monthly Epic Bundle â€“ 15,500 Ks\n"
        "ğŸ Weekly Elite Bundle â€“ 3,100 Ks\n\n"
        "â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n"
        "ğŸ’¬ Contact â€“ @Ryo_h2"
    )

def order(update, context):
    update.message.reply_text("ğŸ“ ML ID + Server á€•á€­á€¯á€·á€•á€«\ná€¥á€•á€™á€¬: 12345678 (1234)")
    context.user_data["step"] = "mlid"

def text_handler(update, context):
    step = context.user_data.get("step")

    if update.message.text == "ğŸ’ Price List":
        price(update, context)
        return

    if update.message.text == "ğŸ“ Order":
        order(update, context)
        return

    if step == "mlid":
        context.user_data["mlid"] = update.message.text
        update.message.reply_text("ğŸ’ Diamond amount á€•á€­á€¯á€·á€•á€«")
        context.user_data["step"] = "amount"

    elif step == "amount":
        context.user_data["amount"] = update.message.text
        update.message.reply_text("ğŸ’¸ Payment screenshot á€•á€­á€¯á€·á€•á€«")
        context.user_data["step"] = "payment"

def photo_handler(update, context):
    if context.user_data.get("step") == "payment":
        data = context.user_data
        context.bot.send_message(
            chat_id=ADMIN_ID,
            text=(
                "ğŸ†• New Order\n\n"
                f"ML ID: {data['mlid']}\n"
                f"Amount: {data['amount']}\n"
                f"User: @{update.message.from_user.username}"
            )
        )
        context.bot.send_photo(
            chat_id=ADMIN_ID,
            photo=update.message.photo[-1].file_id
        )

        update.message.reply_text("âœ… Order á€œá€€á€ºá€á€¶á€•á€¼á€®á€¸á€•á€«á€•á€¼á€®\nAdmin á€…á€…á€ºá€•á€¼á€®á€¸á€œá€¯á€•á€ºá€•á€±á€¸á€•á€«á€™á€šá€º")
        context.user_data.clear()

def main():
    updater = Updater(TOKEN)
    dp = updater.dispatcher

    dp.add_handler(CommandHandler("start", start))
    dp.add_handler(MessageHandler(Filters.text & ~Filters.command, text_handler))
    dp.add_handler(MessageHandler(Filters.photo, photo_handler))

    updater.start_polling()
    updater.idle()

main()
